# Web アプリ概要

## base-project

- `generate_sample_env.py`  
   Git で管理されていない環境ファイルのパラメータサンプルを生成する。

- `tree.py`  
   フォルダ構成を最新化する。

- [フォルダ構成](tree.txt)

## アプリを作る目的

好きなコンテンツ（YouTube）を利用して外国語を学ぶ際の労力を軽減する。多くの韓国人が日本語を学ぶ際に、アニメやボカロなどの日本のオタク文化に触れることで自然と身につけたように、日本人も海外のオタクコンテンツを通じて外国語を自然に学べるシステムを作りたい。同じコンテンツが好きな人同士で「調べる」動作を軽減し、情報を共有することを目指す。

<!--
日本人でも、K-POPやKドラマが好きな人は韓国語を勉強せずに自然と身に着けている人がいる。
音声を聞いて、字幕を整形するのは時間がかかる。全員がやる必要はない。
昔は好きな曲をギターで弾きたいと思った時、テレビで放送されるのを待ってそれを録音して、その音源から耳コピをして楽譜に書き起こしてその楽譜が正しいかわからない状態でその曲を練習する必要があった。
しかし、現代では、インターネットが普及し、自分で楽譜を用意しなくても、誰かほかに好きな人が楽譜を作ってくれてたり、売っていたりするのでそういう労力がかかる部分が軽減されていて、弾くことを練習することに時間を使える。
言語学習でも同じように、わからないことを調べる、というのは全員がやる必要がないと思っていて、文法について解説を作るのは最初にわからないと思った人が作って、次に利用する人は、そのデータを引き継げる形にしたい。
-->

## ターゲット

- 外国語を勉強している日本人
- 日本語を勉強している外国人

対応予定のメインの言語は韓国語、英語、日本語。他の言語でも可能だが、詳細な処理は言語ごとに異なるため、事前に予期している言語しか対応されていない機能もある（自然言語処理のライブラリが言語ごとに分かれているため）。

## 競合となるアプリ、先行研究等

- **Learning Language with YouTube（LLY）**

  - 学習対象の字幕がある場合、それをもとに翻訳文が機械翻訳されている。
  - 翻訳文に誤りがあることがあり、教科書的な使い方は難しい。
  - 学習言語とネイティブ言語を同時に照らし合わせながら字幕を確認できない。

- **単語検索機能**
  - 登録されているデータからのみ検索可能なものが多い。
  - 自分の好きなチャンネルで検索を行いたい場合に対応できない可能性がある。

## Web アプリで作りたい理由

- **PC で操作しながらコピペ等を用いて利用できる形式**
  - 効率的に学習が可能。

## YouTube を対象にした理由

- **Netflix や Amazon Prime Video、テレビの問題点**

  - 実際に話している言葉と字幕の内容が一致していないことが多い。
  - 学習言語とネイティブ言語を同時に表示して確認することができない（基本的にどちらか一つの字幕しか表示できない）。
  - テレビの場合、外国語を話しているのを聞いて、自分で耳コピした音をネットで検索して調べる必要がある。

- **YouTube の利点**
  - サブスクリプションサービスでは複数人が同時に話す動画が多いが、YouTube では一人で話す動画が多く、リスニング初心者に優しい。
  - 専門用語について学びやすい。例えば、エンジニア関連、イラスト関連、VTuber 関連の用語など、それぞれの専門分野の用語が学べる。
  - YouTube の場合、動画がアップロードされてしばらくすると、自動で文字起こしされるのでテキストとして確認しやすい。
  - 字幕をテキスト形式で取得することができれば簡単にコピーやペーストができ、翻訳するのも容易になる。
  - YouTube では投稿者が多言語で手動字幕を追加していることが多く、自動字幕に誤りがあっても正しい字幕として学習に利用できる。

## 機能一覧

### チャンネルごとの言語指定

- チャンネルのデフォルト言語を指定し、その言語に対して理解できる言語を指定する（例：デフォルト言語が韓国語、自分が理解できる言語が日本語の場合）。

### 字幕データ更新

- 指定したチャンネルの言語指定された字幕データをダウンロードする。
- 字幕データは自動生成された自動字幕と手作業で作成された手動字幕の両方をダウンロードする。
- デフォルト言語が韓国語、学習言語が日本語の場合、韓国語の自動字幕、韓国語の手動字幕、日本語の手動字幕が対象として字幕の存在チェックを行う。

### 単語検索機能

- 手動字幕に対して行ごとに部分一致で検索を行う機能。
- 自動字幕に対しては複数単語に分割して一致検索を行う（全探索でループさせているため時間がかかる）。
- 検索結果にはタイムスタンプ付き動画のリンクがあるので、その単語が話されている箇所を動画で確認できる。

<!--
日本語を学習している外国人にたまに聞かれることで、「How are you?」って日本語でなんて言うの？と聞かれることがあり、それに対して「元気ですか？」と教えるのが一般的だと思うが、
実際の日本人の会話の中で「元気ですか？」と使うのは体調が悪そうにしているのを見た時ぐらいで、「元気ですか？」を挨拶的な意味合いで使う文化はないと思う。
なので、直訳するとそういった意味になるが、実際にネイティブが使っているのかを確かめるためにもこの単語検索機能は役立つと思う。
-->

### 単語データ計測

- 手動字幕に対しては空白ごとに文章を分割し、最小の単語数、最小の文字数などを指定し、ランキングを棒グラフで生成する。
- 自動字幕に対しては元々分割されているトークンごとに計測を行う。

<!--
外国語を勉強する際に、単語帳に載っている単語を上から学習するのもいいが、単語帳に載っている単語は案外実際の配信では使われないことが多い。
実際に話している字幕データから頻出単語を絞り込むことで、重要な単語を確認できる。
-->

### 動画一覧

- 言語ごとに手動字幕が追加されているかで絞り込みを行うことができる。

### 動画詳細

- デフォルトの字幕と翻訳言語の字幕を照らし合わせ、字幕の開始時間のタイムスタンプが一致している場合に合わせて登録する。

### 字幕一覧

- 登録されている字幕データを翻訳字幕と合わせてタイムスタンプ順に表示する。

### 字幕詳細

- 学習ステータスを登録することができる（未確認、確認したが未学習、一部わからない、学習済み）。
- タイムスタンプ付き動画リンクでその箇所を動画で確認することができる。
- 字幕と翻訳が登録されており、それに合わせて直訳と翻訳の詳細を登録することができる。
- 翻訳の詳細には ChatGPT を用いて形態素解析など文法的な説明を含めた結果を取得することができる。
- ChatGPT の API は無制限ではないので、プロンプトをコピーするボタンを用意している。ブラウザで ChatGPT を開き、そのプロンプトを貼り付けることで同じ結果を得ることができる。
- 結果はコードブロックに出力してもらうようにコピペ用のプロンプトには追加している。

### 言語学習記録確認画面

- 学習ステータスが割り当てられている字幕の履歴を確認することができる。
- 学習言語と学習ステータスで絞り込みができ、一部だけわからないものを再度確認し、理解したらステータスを変えることでわからないものを減らしていくことができる。

## やりたいことと、案はあるができなさそうなこと

- 字幕とタイムスタンプを照らし合わせる人、字幕を付ける人、翻訳をする人、それぞれにポイントを付与し、特定のページに対する権限を与えたい。
- TOPIK, TOEIC, JLPT などの階級ごとの単語帳データを学習させ、それに対するチャンネルごとの頻出単語のランキングを作りたい（著作物のため私的利用の範囲でしかできない）。
